<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insert title here</title>
	<link rel="stylesheet" type="text/css" media="all" href="/css/main_style.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/css/menu_bar.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/css/table_style.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/css/form_style.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/css/user/user_style.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/css/user/usercolors_style.css" />
</head>
<body>
	<header th:replace="fragments/top :: top"></header>
	<nav th:replace="user/fragments/menu :: menu"></nav>
	<section id="container">
	<!-- ************************************************************************* -->
		<div class="header-container">
			<h1 class="header-header">Pokoje</h1>
		</div>

		 <div>
		 	<span>Max: </span><span th:text="${house.capacity}"></span>
			<span>Aktualnie: </span><span id="sum"></span>
			room
			<form th:action="@{/accommodation/saverooms}" method="post">
				<input type="hidden" id="maxcapacity" th:value="${house.capacity}">
				<input type="hidden" id="houseid" name="houseid" th:value="${house.id}">
				
				<div th:each="room, it : ${#numbers.sequence(0, house.noofrooms-1)}">
	
						<label for="roomname">Nazwa/nr pokoju</label>
						<input type="text" name="roomname" id="roomname" required>
						
						<select id="${it.index}" name="capacity" onchange="updateC()">
							<option th:each="i : ${#numbers.sequence(1, house.capacity)}" th:value="${i}" th:text="${i}"></option>
						</select>
						
						<label for="remark">Uwagi</label>
						<textarea rows="5" cols="10" name="remark"></textarea>
						
				</div>
				<button type="submit" id="addRoom"  disabled="disabled" >dodaj</button>
			</form>
		 </div>
	
	<!-- ************************************************************************* -->
	</section>
	<footer class="footer" th:replace="fragments/footer :: footer"></footer>
</body>
<script>


var Mcapacity = document.getElementById("maxcapacity").value;
var arr = document.getElementsByName("capacity");
var current = 0;
for(var i = 0; i < arr.length; i++){
	current += parseInt(arr[i].value, 10);
}
document.getElementById("sum").innerHTML = current;
if(current == Mcapacity){
	document.getElementById("addRoom").disabled = false;
	
}else{
	document.getElementById("addRoom").disabled = true;	
}

function updateC (){

	var arr = document.getElementsByName("capacity");
	var current = 0;
	for(var i = 0; i < arr.length; i++){
		current += parseInt(arr[i].value, 10);
	}
	document.getElementById("sum").innerHTML = current;

	if(current == Mcapacity){
		document.getElementById("addRoom").disabled = false;
		
	}else{
		document.getElementById("addRoom").disabled = true;	
	}
}
</script>
</html>